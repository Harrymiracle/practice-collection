<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>封装函数绘制圆角矩形</title>
</head>
<body>
  <canvas id="canvas" style="border:1px solid black;">
  	你的浏览器不支持canvas,请更换后再试。
  </canvas>
  <script>
  	window.onload = function(){
  	  var canvas = document.getElementById("canvas");
  	  canvas.width = 800;
  	  canvas.height = 600;

      var context = canvas.getContext("2d");

      fillRoundRect(context,150,50,500,500,10,"#bbada0");
    //  strokeRoundRect(context,150,50,500,500,10,"#bbada0");

      for(var i = 0; i < 4; i++){
        for(var j = 0; j < 4; j++){
          fillRoundRect(context,170+i*120,70+j*120,100,100,6,"#ccc0b3");
        //  strokeRoundRect(context,170+i*120,70+j*120,100,100,6,"#ccc0b3");
        }
      }

  	}


  	function fillRoundRect(cxt,x,y,width,height,radius,fillColor){
  	  if(2*radius > width || 2*radius > height){ //圆角半径乘以二大于宽或是高，直接返回
  	  	return;
  	  }
  	  cxt.save();
  	  cxt.translate(x,y);
  	  pathRoundRect(cxt,width,height,radius);
  	  cxt.fillStyle = fillColor || "black";
  	  cxt.fill();
  	  cxt.restore();
  	}

  	function strokeRoundRect(cxt,x,y,width,height,radius,lineWidth,fillColor){
  	  if(2*radius > width || 2*radius > height){ //圆角半径乘以二大于宽或是高，直接返回
  	  	return;
  	  }
  	  cxt.save();
  	  cxt.translate(x,y);
  	  pathRoundRect(cxt,width,height,radius);
  	  cxt.lineWidth = lineWidth || 1;
  	  cxt.fillStyle = fillColor || "black";
  	  cxt.stroke();
  	  cxt.restore();
  	}

  	function pathRoundRect(cxt,width,height,radius){
   	  cxt.beginPath();
   	  cxt.arc(width-radius,radius,radius,1.5*Math.PI,0); //右上角
   	  cxt.lineTo(width,height-radius);	//右边
   	  cxt.arc(width-radius,height-radius,radius,0,0.5*Math.PI);	//右下角
   	  cxt.lineTo(radius,height);	//底边
   	  cxt.arc(radius,height-radius,radius,0.5*Math.PI,Math.PI);	//左下角
   	  cxt.lineTo(0,radius);	//左边
   	  cxt.arc(radius,radius,radius,Math.PI,1.5*Math.PI);	//左上角

   	  cxt.closePath();	//封闭路径时补上上边
  	}
  	
  </script>
</body>
</html>