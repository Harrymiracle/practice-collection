<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>图片集2</title>
    <style>
        body{
            background: #ccc;
            color: #333;
            font-size: "Helvetica", "Arial", serif;
            margin: 20px 10%;
        }
        a{
            color: #333;
            text-decoration: none;
            background: transparent;
            font-weight: bold;
        }
        img{
            display: block;
        }
        h1{
            color: #333;
            background: transparent;
        }
        ul{
            list-style: none;
            padding: 0;
        }
        li{
            display: inline-block;
            margin: 0 10px;
        }
        p{
            font-weight: bold;
        }
    </style>
</head>
<body>
<h1>Snapshots</h1>
<ul id="imageGallery">
    <!--return false阻止默认跳转行为-->
    <li><a href="../images/11.jpg" title="A running boy">Running</a></li>
    <li><a href="../images/12.jpg" title="Playing sand">Sand</a></li>
    <li><a href="../images/13.jpg" title="A writting girl">Write</a></li>
    <li><a href="../images/14.jpg" title="Blow the wind">Wind</a></li>
</ul>
<img id="placeholder" src="../images/15.jpg" alt="My picture gallery."/>
<p id="description">Choose a picture.</p>

<script>
    function prepareGallery(){
        if(!document.getElementById){ return false;}
        if(!document.getElementsByTagName){ return false;}

        //判断操作的图片集元素是否存在
        if(!document.getElementById("imageGallery")){ return false;}

        var gallery = document.getElementById("imageGallery"),
            links = gallery.getElementsByTagName("a");

        for(var i = 0, len = links.length; i < len; i++) {
            links[i].onclick = function () {
                return !showPic(this);
            }
        }
    }

    function showPic(whichPic){
        if(!document.getElementById("placeholder")){ return false;} //返回值为假，跳转到另一页
        var resource = whichPic.getAttribute("href");
        var placeholder = document.getElementById("placeholder");
        placeholder.setAttribute("src", resource);

        if(document.getElementById("description")){
            var text = whichPic.getAttribute("title");
            var description = document.getElementById("description");
            description.firstChild.nodeValue = text;
        }
        //设置返回值为真，在placeholder中显示
        return true;
    }

    function addLoadEvent(fun){
        var oldonload = window.onload;

        //之前没有加载事件就设置当前传递的事件为新的加载事件
        if(typeof window.onload != "function"){
            window.onload = fun;
        }else{
            //之前有加载事件就在旧的加载事件后加载新的事件
            window.onload = function(){
                oldonload();
                fun();
            }
        }
    }

    //共享onload事件
    addLoadEvent(prepareGallery);
</script>
</body>
</html>