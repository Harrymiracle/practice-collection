<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <title>websocket</title>
</head>

<body>
    <h2>chat room</h2>
    <input id="content" type="text">
    <input id="submitBtn" value="发送" type="button">
    <div id="receive"></div>

    <script>
        var websocket = new WebSocket('ws://localhost:8989');

        function showmsg(str) {
            var div = document.createElement('div')
            div.innerHTML = str;
            document.body.appendChild(div);
        }

        websocket.onopen = function() {
            console.log('Websocket opend!');
            document.getElementById('submitBtn').onclick = function() {
                var txt = document.getElementById('content').value;
                if (txt) websocket.send(txt);
            }
        };

        websocket.onmessage = function(e) {
            console.log(e.data);
            showmsg(e.data);
        };

        websocket.onclose = function() {
            console.log('Websocket closed!');
        };
    </script>
</body>

</html>